WEBVTT
Kind: captions
Language: ar

00:00:00.000 --> 00:00:04.300
بإمكان الاستعلامات الفرعية أن تكون مفيدة
بشكل خاص في تحسين أداء استعلاماتك.

00:00:04.400 --> 00:00:07.167
تخيّل أنك تقوم بإعداد تقارير عالية المستوى
من أجل شركة Parch and Posey.

00:00:07.267 --> 00:00:10.667
وترغب في أن يتم إعداد
عدة قياسات بشكل يومي.

00:00:10.767 --> 00:00:13.000
يمكنك استخدام هذا من أجل
تزويد لوحة معلومات بالبيانات لتساعدك

00:00:13.100 --> 00:00:16.333
في إدارة أعمالك اليومية
من خلال تحديد مواطن الشذوذ.

00:00:16.433 --> 00:00:20.367
للقيام بذلك، ستحتاج إلى ربط بيانات
من بعض الجداول ثم التجميع بشكل يومي.

00:00:20.467 --> 00:00:23.000
يمكنك القيام بهذا
باستخدام استعلام رئيسي واحد،

00:00:23.100 --> 00:00:27.033
لكن هناك بعض الإيجابيات الكبيرة لتجميع
الجداول بشكل فردي ضمن استعلامات فرعية،

00:00:27.133 --> 00:00:29.733
ثم ربط الاستعلامات الفرعية
التي تم تجميعها.

00:00:29.833 --> 00:00:33.800
أولاً، لنرَ كيف نقوم بذلك
باستخدام استعلام كبير واحد.

00:00:33.900 --> 00:00:36.567
مما يمكنك رؤيته هنا
هو أنه للقيام بذلك بشكل صحيح،

00:00:36.667 --> 00:00:41.267
علينا الربط باستخدام حقول التاريخ،
مما يسبب ما يمكن تسميته بانفجار البيانات.

00:00:41.367 --> 00:00:46.667
ما يحدث ببساطة هو أنك تربط كل صف
لحدث وقع في أحد الأيام من أحد الجدولين

00:00:46.767 --> 00:00:51.333
بكل صف يحمل التاريخ ذاته
في الجدول الآخر.

00:00:51.433 --> 00:00:53.967
أي أن عدد الصفوف
التي سيتم استرجاعها ضخم جداً.

00:00:54.067 --> 00:00:55.867
بسبب هذا الأثر المضاعف،

00:00:55.967 --> 00:00:58.033
عليك استخدام عد الحقول المميزة
count distinct

00:00:58.133 --> 00:01:01.867
بدلاً من العد العادي
للحصول على عد دقيق مندوبي المبيعات

00:01:01.967 --> 00:01:04.633
والطلبات، وأخيراً زيارات الموقع.

00:01:04.733 --> 00:01:10.267
تأمل حجم مجموعات البيانات الضخم
هذه قبل البدء بالتجميع.

00:01:50.267 --> 00:01:54.733
يمكنك أن ترى
أن تنفيذ الربط JOIN بهذه الطريقة يعرض

00:01:54.833 --> 00:01:58.633
79 ألف صفاً يجب أن يتم تجميعه بعد ذلك.

00:01:58.733 --> 00:02:01.767
يمكنك الحصول على النتيجة نفسها
على نحو أكثر كفاءة

00:02:01.867 --> 00:02:03.700
من خلال تجميع الجداول منفصلة

00:02:03.800 --> 00:02:09.000
بحيث يتم تنفيذ العد
على مجموعات بيانات أصغر بكثير.

00:03:04.700 --> 00:03:10.367
كتبنا هنا الاستعلام الفرعي الأول.

00:04:03.933 --> 00:04:08.767
وهذا هو الاستعلام الفرعي الثاني.

00:04:08.867 --> 00:04:13.867
كما ترى، يعرض كلّ من هذين الاستعلامين
الفرعيين حوالى ألف صف.

00:04:13.967 --> 00:04:16.067
بهذه الطريقة، عندما نكتب عبارة الربط JOIN،

00:04:16.167 --> 00:04:19.433
فإننا سنربط ألف صف بألف صف

00:04:19.533 --> 00:04:22.500
ونربط التواريخ بتواريخ أخرى تطابقها،

00:04:22.600 --> 00:04:26.833
وعليه ستكون التكلفة
من حيث وقت التشغيل أقل بكثير.

00:06:04.267 --> 00:06:07.967
إننا نستخدم عبارة ربط كامل
"FULL JOIN" هنا من باب الاحتياط

00:06:08.067 --> 00:06:11.567
في حال كانت هناك بيانات في شهر
ما موجودة في أحد الجدولين دون الآخر.

00:06:11.667 --> 00:06:16.567
كما رأينا، نتج عن كلا الاستعلامين
حوالى ألف صف فقط،

00:06:16.667 --> 00:06:20.567
وينتج عن الاستعلام الأخير
جوالى ألف صف أيضاً.

00:06:20.667 --> 00:06:23.733
وعليه فإن هذا أفضل بكثير
من الـ79 ألف صف

00:06:23.833 --> 00:06:28.000
التي رأينها قبل قليل عندما كنا نربط من دون
التجميع المسبق في الاستعلامات الفرعية,

