WEBVTT
Kind: captions
Language: pt-BR

00:00:00.469 --> 00:00:02.000
Um problema
com as subconsultas

00:00:02.034 --> 00:00:03.300
é que elas podem tornar
suas consultas

00:00:03.334 --> 00:00:04.967
longas e difíceis de ler.

00:00:05.667 --> 00:00:08.333
Expressões de tabelas comuns
ou CTEs

00:00:08.833 --> 00:00:11.333
podem ajudar a quebrar a consulta
em componentes separados,

00:00:11.367 --> 00:00:14.200
para que a lógica da sua consulta
tenha uma leitura fácil.

00:00:14.533 --> 00:00:16.867
Você pode ler a lógica
das subconsultas sozinhas

00:00:16.901 --> 00:00:20.067
e depois ler facilmente
a lógica das consultas finais.

00:00:21.133 --> 00:00:23.533
Vamos voltar ao exemplo
em que encontramos

00:00:23.567 --> 00:00:27.267
a média de eventos por dia
em cada canal de marketing.

00:00:30.067 --> 00:00:31.367
Vamos transformar
a subconsulta

00:00:31.401 --> 00:00:33.667
em sua própria expressão
de tabela comum,

00:00:33.701 --> 00:00:36.200
que criaremos usando
o comando "with".

00:01:05.867 --> 00:01:09.033
Aqui estamos apenas definindo
essa expressão de tabela comum,

00:01:09.067 --> 00:01:12.033
mas podemos, teoricamente,
escrever tantas quanto quisermos.

00:01:12.567 --> 00:01:15.067
Precisamos definir quaisquer
expressões de tabela comuns

00:01:15.101 --> 00:01:16.467
no início da consulta,

00:01:16.501 --> 00:01:19.767
para usá-las na consulta final
na parte inferior.

00:01:20.233 --> 00:01:22.600
Cada expressão de tabela comum
recebe um codinome,

00:01:23.033 --> 00:01:24.367
assim como uma subconsulta.

00:01:25.067 --> 00:01:27.033
Aqui o codinome é "Events".

