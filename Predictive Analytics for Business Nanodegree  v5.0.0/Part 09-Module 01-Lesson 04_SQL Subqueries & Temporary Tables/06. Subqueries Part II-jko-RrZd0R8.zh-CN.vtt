WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:03.825
子查询可以在查询中的若干地方使用

00:00:03.825 --> 00:00:05.880
事实上 它可以用在任何地方

00:00:05.879 --> 00:00:10.550
无论是表名称、列名称还是个别值

00:00:10.550 --> 00:00:13.095
它们尤其适用于条件逻辑

00:00:13.095 --> 00:00:15.960
可与 WHERE 或 JOIN 子句协同使用

00:00:15.960 --> 00:00:18.539
或用于 CASE 语句的 WHEN 部分

00:00:18.539 --> 00:00:21.629
例如 你可能希望仅返回

00:00:21.629 --> 00:00:25.515
与 Parch &amp; Posies 首个订单相同月份的订单

00:00:25.515 --> 00:00:27.719
要获取首个订单的日期

00:00:27.719 --> 00:00:30.519
你可以编写一个带有 min 函数的子查询

00:00:30.519 --> 00:00:48.289
我们添加一个 date_trunc 函数来获取月份

00:00:48.289 --> 00:00:50.479
最后编写一个外层查询

00:00:50.479 --> 00:01:23.135
使用它来筛选订单表 并按 occurred_at 列进行分类

00:01:23.135 --> 00:01:39.224
你可以看到所有这些订单发生在 2013 年 12 月

00:01:39.224 --> 00:01:41.584
也就是与第一个订单相同的月份

00:01:41.584 --> 00:01:46.419
此查询可行的原因是子查询的结果只有一个单元格

00:01:46.420 --> 00:01:50.415
大多数条件逻辑都可以和包含单个单元格结果的子查询一起使用

00:01:50.415 --> 00:01:53.370
但是 IN 是唯一一种

00:01:53.370 --> 00:01:57.000
当内层查询包含多个结果时可用的条件逻辑类型

