WEBVTT
Kind: captions
Language: ar

00:00:00.000 --> 00:00:03.233
والآن وقد تعرفت أكثر على آلية عمل
دالة النافذة Window Function،

00:00:03.333 --> 00:00:05.267
فلنتعرف على قوتها الحقيقية.

00:00:05.367 --> 00:00:07.000
عند استخدام دوال النافذة،

00:00:07.100 --> 00:00:11.433
يمكنك تطبيق عمليات التجميع ذاتها التي كنت
لتطبقها في الحالات العادية: المجموع SUM،

00:00:11.533 --> 00:00:14.600
العد COUNT، المتوسط AVERAGE،
والقيمة الدنيا MIN، والقيمة القصوى MAX.

00:00:14.700 --> 00:00:18.533
أسهل طريقة لفهم آلية عملها
هو بتنفيذها كلها دفعة واحدة.

00:00:18.633 --> 00:00:21.833
سنضيفها فحسب إلى هذا المثال
الذي استخدمناه في المرة السابقة.

00:00:21.933 --> 00:00:24.667
لنستعرض كل منها على حدة.

00:00:24.767 --> 00:00:26.667
أولاً لنستعرض الجمع.

00:00:26.767 --> 00:00:29.067
إنه يحسب مجموعاً تراكمياً.

00:00:29.167 --> 00:00:34.867
الصف الأول
هو قيمة الكمية العادية ذاتها، 123.

00:00:34.967 --> 00:00:37.533
الصفّان الثاني والثالث لهما نفس القيمة

00:00:37.633 --> 00:00:40.800
لأنهما مرتبان حسب الشهر المُقتطع
من العمود occured-at.

00:00:40.900 --> 00:00:45.067
بما أن الصفّين 2 و3 لهما الشهر نفسه،
فقد تم ضمهما.

00:00:45.167 --> 00:00:48.700
على نحو مشابه للضم الذي يتم عند استخدام
RANK و DENSE_RANK.

00:00:48.800 --> 00:00:53.633
أي أن القيمة 819 تساوي 123

00:00:53.733 --> 00:00:59.167
من الصف الأول زائد 506
و190 من الصفّين الثاني والثالث.

00:00:59.267 --> 00:01:03.833
كما تم ضم الصفّين الرابع والخامس أيضاً
لأنهما يتشاركان الشهر نفسه.

00:01:03.933 --> 00:01:08.067
أما COUNT فتعرض عداً تراكمياً
ويتم ضم الصفوف فيها بالطريقة نفسها.

00:01:08.167 --> 00:01:11.533
يمكنك أن ترى أن الصفّين
الثاني والثالث كلاهما يعرضان العدد 3.

00:01:11.633 --> 00:01:15.133
فيما يعرض الصفّان
الرابع والخامس العدد 5.

00:01:15.233 --> 00:01:17.533
أما AVG فتعرض متوسطاً تراكمياً،

00:01:17.633 --> 00:01:19.933
والذي هو في الواقع
مجموعاً تراكمياً SUM مقسوماً

00:01:20.033 --> 00:01:26.200
على عد تراكمي COUNT:
819 تقسيم 3 تساوي 273،

00:01:26.300 --> 00:01:30.500
و1430 تقسيم 5 تساوي 286.

00:01:30.600 --> 00:01:34.600
أما MIN فتعرض أقل قيمة
تمت مصادفتها حتى تلك النقطة في النافذة.

00:01:34.700 --> 00:01:39.033
123 هي أقل قيمة
إلى أن نصل إلى القيمة 85.

00:01:39.133 --> 00:01:41.467
وهي أقل قيمة في النافذة بأكملها.

00:01:41.567 --> 00:01:46.700
أي أنها تبقى عند 85
حتى تبدأ النافذة التالية بالعدد 1011.

00:01:46.800 --> 00:01:49.667
وتعمل MAX
بالطريقة ذاتها التي تعمل بها MIN،
31
00:01:49,767 --&gt; 00:00:00,000
فهي تعرض دائماً القيمة القصوى
حتى الصف المعروض ضمن النافذة الحالية.

